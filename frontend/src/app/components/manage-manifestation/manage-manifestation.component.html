<div id="background-cover"></div>

<div class="main-container">
    
    <div class="centered-content">
        <h1 class="title"> {{ title }} </h1>
    
        <form [formGroup]="manifestationForm">

            <div class="form-group">
                <label>Name: </label>
                <input class="form-control" type="text" formControlName="name" placeholder="Enter name...">
                <small *ngIf="manifestationForm.controls['name'].touched
                    && manifestationForm.controls['name'].hasError('required')" class="error-message">
                    Name is required
                </small>
            </div>

            <div class="form-group">
                <label>Description: </label>
                <textarea class="form-control" type="text" rows="3"
                    formControlName="description" placeholder="Enter description...">
                </textarea>
                <small class="error-message" *ngIf="manifestationForm.controls['description'].touched
                    && manifestationForm.controls['description'].hasError('required')">
                    Description is required
                </small>
            </div>

            <app-manage-manifestation-days [manifestationDays]="manifestationForm.controls['manifestationDates']">

            </app-manage-manifestation-days>
            
            <div class="form-group">
                <label>Type: </label>
                <select class="form-control" formControlName="type">
                    <option *ngFor="let type of manifestationTypes; index as i" [value]="i">
                         {{ type }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Location: </label>
                <select class="form-control" formControlName="locationId">
                    <option *ngFor="let location of locations" [value]="location.id">
                        {{ location.name }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                    <input type="checkbox" class="custom-control-input" id="allow-reservations"
                        formControlName="reservationsAllowed" (click)="clearReservationData()">
                    <label class="custom-control-label" for="allow-reservations"> Allow reservations </label>
                </div>
            </div>

            <div class="form-group" *ngIf="manifestationForm.controls['reservationsAllowed'].value">
                <label>Maximum reservations per user: </label>
                <input class="form-control" type="number" placeholder="Enter max reservations..."
                    formControlName="maxReservations" min="1" max="20" onkeydown="return false">
            </div>

            <div class="form-group" *ngIf="manifestationForm.controls['reservationsAllowed'].value">
                <label>Last day of reservation: </label>
                <input class="form-control" type="date" placeholder="Select last reservation day..."
                    formControlName="reservableUntil">
            </div>

            <br/>

            <button type="submit" class="btn btn-primary" (click)="submitManifestation()"> Submit </button>
        </form>  
    </div>

</div>

